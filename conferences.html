<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Recommended Conferences â€” Temple University MCGSA</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <style>
        .conference-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            gap: 1.5rem;
        }
        .conference-item {
            background: var(--white);
            border: 1px solid var(--silver);
            padding: 1.2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }
        .conference-name {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--cherry-red);
            margin: 0 0 0.5rem 0;
        }
        .conference-meta {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 0.8rem;
            flex-wrap: wrap;
        }
        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.95rem;
            color: var(--metallic-silver);
        }
        .meta-label {
            font-weight: 600;
            color: var(--black);
        }
        .conference-description {
            color: #222;
            line-height: 1.6;
        }
        .deadline-notice {
            display: inline-block;
            margin-left: 0.5rem;
            padding: 0.2rem 0.5rem;
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 4px;
            font-size: 0.85rem;
            color: #856404;
            font-weight: 600;
        }
        .sort-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: var(--white);
            border: 1px solid var(--silver);
            border-radius: 8px;
        }
        .sort-controls label {
            font-weight: 600;
            color: var(--black);
        }
        .sort-controls select {
            padding: 0.5rem 1rem;
            border: 1px solid var(--silver);
            border-radius: 6px;
            font-size: 0.95rem;
            background: var(--white);
            color: var(--black);
            cursor: pointer;
            transition: all 0.2s;
        }
        .sort-controls select:hover {
            border-color: var(--cherry-red);
        }
        .sort-controls select:focus {
            outline: none;
            border-color: var(--cherry-red);
            box-shadow: 0 0 0 2px rgba(157, 34, 53, 0.1);
        }
    </style>
</head>
<body>
    <header>
        <h1>Temple University Media and Communication Graduate Student Association</h1>
    </header>
    <nav>
        <a href="index.html">Home</a>
        <a href="current-board.html">Current Board</a>
        <a href="syllabus-archive.html">Syllabus Archive</a>
        <a href="conferences.html" class="link-active">Conferences</a>
        <a href="faqs.html">FAQs</a>
    </nav>
    <main>
        <h2 class="mt-2">Recommended Conferences</h2>
        <p class="mb-2 archive-intro">Below is a curated list of conferences that may be relevant to Temple M&C PhD students. This list is not exhaustive and is meant to serve as a starting point for exploring conference opportunities.</p>

        <div class="sort-controls">
            <label for="sortBy">Sort by:</label>
            <select id="sortBy" onchange="sortConferences()">
                <option value="name">Conference Name</option>
                <option value="conference-date">Next Conference Date</option>
                <option value="deadline">Submission Deadline</option>
            </select>
        </div>

        <ul class="conference-list" id="conferenceList">
            <!-- Conference items will be populated from conferences.json -->
        </ul>
    </main>
    <script>
        let conferencesData = [];
        
        // Load and display conferences from JSON
        fetch('conferences.json')
            .then(response => response.json())
            .then(data => {
                conferencesData = data.conferences;
                renderConferences(conferencesData);
            })
            .catch(error => {
                console.error('Error loading conferences:', error);
                document.getElementById('conferenceList').innerHTML = '<li style="padding: 2rem; text-align: center;">Error loading conference data. Please try again later.</li>';
            });
        
        function renderConferences(conferences) {
            const conferenceList = document.getElementById('conferenceList');
            conferenceList.innerHTML = '';
            const currentDate = new Date();
            
            conferences.forEach(conf => {
                const li = document.createElement('li');
                li.className = 'conference-item';
                
                // Handle conference date display
                let conferenceDate = conf.next_conference;
                const confDate = parseDeadlineDate(conf.next_conference);
                if (confDate && confDate < currentDate && conf.typical_month) {
                    // Conference has passed, show next year's typical month
                    const nextYear = currentDate.getFullYear() + 1;
                    conferenceDate = `${conf.typical_month} ${nextYear}`;
                }
                
                // Handle deadline display
                let deadlineDisplay = conf.next_deadline;
                if (conf.next_deadline) {
                    const deadlineDate = parseDeadlineDate(conf.next_deadline);
                    if (deadlineDate && deadlineDate < currentDate && conf.typical_deadline_month) {
                        // Show next year's typical deadline month
                        const nextYear = currentDate.getFullYear() + 1;
                        deadlineDisplay = `${conf.typical_deadline_month} ${nextYear}`;
                    }
                }
                
                li.innerHTML = `
                    <h3 class="conference-name">${conf.name}</h3>
                    <div class="conference-meta">
                        <span class="meta-item"><span class="meta-label">Next Conference:</span> ${conferenceDate}</span>
                        <span class="meta-item"><span class="meta-label">Next Deadline:</span> ${deadlineDisplay}</span>
                        <span class="meta-item"><span class="meta-label">Website:</span> <a href="${conf.website}" target="_blank">${conf.website.replace('https://', '').replace('http://', '')}</a></span>
                    </div>
                    <p class="conference-description">
                        ${conf.description}
                    </p>
                `;
                
                conferenceList.appendChild(li);
            });
        }
        
        function sortConferences() {
            const sortBy = document.getElementById('sortBy').value;
            const currentDate = new Date();
            let sorted = [...conferencesData];
            
            if (sortBy === 'name') {
                sorted.sort((a, b) => a.name.localeCompare(b.name));
            } else if (sortBy === 'conference-date') {
                sorted.sort((a, b) => {
                    let dateA = parseDeadlineDate(a.next_conference);
                    let dateB = parseDeadlineDate(b.next_conference);
                    
                    // If date has passed, use next year's typical month for sorting
                    if (dateA && dateA < currentDate && a.typical_month) {
                        const nextYear = currentDate.getFullYear() + 1;
                        dateA = parseDeadlineDate(`${a.typical_month} ${nextYear}`);
                    }
                    if (dateB && dateB < currentDate && b.typical_month) {
                        const nextYear = currentDate.getFullYear() + 1;
                        dateB = parseDeadlineDate(`${b.typical_month} ${nextYear}`);
                    }
                    
                    if (!dateA) return 1;
                    if (!dateB) return -1;
                    return dateA - dateB;
                });
            } else if (sortBy === 'deadline') {
                sorted.sort((a, b) => {
                    let dateA = parseDeadlineDate(a.next_deadline);
                    let dateB = parseDeadlineDate(b.next_deadline);
                    
                    // If deadline has passed, use next year's typical deadline month for sorting
                    if (dateA && dateA < currentDate && a.typical_deadline_month) {
                        const nextYear = currentDate.getFullYear() + 1;
                        dateA = parseDeadlineDate(`${a.typical_deadline_month} ${nextYear}`);
                    }
                    if (dateB && dateB < currentDate && b.typical_deadline_month) {
                        const nextYear = currentDate.getFullYear() + 1;
                        dateB = parseDeadlineDate(`${b.typical_deadline_month} ${nextYear}`);
                    }
                    
                    if (!dateA) return 1;
                    if (!dateB) return -1;
                    return dateA - dateB;
                });
            }
            
            renderConferences(sorted);
        }
        
        // Parse deadline dates from various formats
        function parseDeadlineDate(deadlineStr) {
            if (!deadlineStr || deadlineStr === 'TBA') return null;
            
            // Handle formats like "October 2025", "March 2026", "July 2025"
            const monthYearMatch = deadlineStr.match(/(\w+)\s+(\d{4})/);
            if (monthYearMatch) {
                const monthNames = ['january', 'february', 'march', 'april', 'may', 'june', 
                                   'july', 'august', 'september', 'october', 'november', 'december'];
                const monthIndex = monthNames.indexOf(monthYearMatch[1].toLowerCase());
                if (monthIndex !== -1) {
                    // Set to last day of the month
                    const year = parseInt(monthYearMatch[2]);
                    return new Date(year, monthIndex + 1, 0);
                }
            }
            
            return null;
        }
    </script>
    <footer>
        &copy; 2025 Temple University MCGSA
    </footer>
</body>
</html>
